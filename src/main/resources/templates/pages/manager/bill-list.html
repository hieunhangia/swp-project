<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Danh s√°ch h√≥a ƒë∆°n</title>
  <link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="auth-body">

<!-- N√∫t quay l·∫°i -->
<a href="/manager" class="btn btn-light position-absolute top-0 start-0 m-3">‚Üê Quay l·∫°i</a>

<!-- Alerts -->
<div class="alerts-stack" style="height: 0px; width: fit-content; margin: 0px 50px 0px auto;">
  <div class="alert alert-success alert-dismissible fade show" th:hidden="${msg == null}">
    <strong>Th√†nh c√¥ng!</strong> <span th:text="${msg}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
  <div class="alert alert-danger alert-dismissible fade show" th:hidden="${error == null}">
    <strong>Th·∫•t b·∫°i!</strong> <span th:text="${error}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
</div>

<!-- N·ªôi dung ch√≠nh -->
<div class="container-fluid py-4">
  <br>
  <br>
  <div class="auth-card p-4 shadow-sm mb-5">
    <h1 class="h5 mb-3 text-primary">üìÑ Danh s√°ch h√≥a ƒë∆°n</h1>

    <!-- T·ªïng h√≥a ƒë∆°n -->
    <h5 th:if="${bills != null}" class="mb-3">T·ªïng h√≥a ƒë∆°n: 
      <span th:text="${bills.size()}">0</span>
    </h5>

    <!-- B·∫£ng danh s√°ch -->
    <div class="">
      <table class="table table-striped table-hover align-middle">
        <thead class="table-light">
          <!-- N√∫t s·∫Øp x·∫øp -->
          <form th:action="@{/manager/bill-list}" method="get">
            <tr class="row">
              <th class="col-lg-1">
                <button type="submit" name="sortCriteria" value="id"
                        th:class="'btn btn-sm ' + (${sortCriteria.equals('id')} ? 'btn-primary' : 'btn-outline-primary')"
                        th:text="'ID ' + (${sortCriteria.equals('id') ? (k == 1 ? '‚ñ≤' : '‚ñº') : ''})">
                </button>
              </th>
              <th class="col-lg-2">
                <button type="submit" name="sortCriteria" value="paymentTime"
                        th:class="'btn btn-sm ' + (${sortCriteria.equals('paymentTime')} ? 'btn-primary' : 'btn-outline-primary')"
                        th:text="'Ng√†y thanh to√°n ' + (${sortCriteria.equals('paymentTime') ? (k == 1 ? '‚ñ≤' : '‚ñº') : ''})">
                </button>
              </th>
              <th class="col-lg-2">
                <button type="submit" name="sortCriteria" value="shopName"
                        th:class="'btn btn-sm ' + (${sortCriteria.equals('shopName')} ? 'btn-primary' : 'btn-outline-primary')"
                        th:text="'T√™n c·ª≠a h√†ng ' + (${sortCriteria.equals('shopName') ? (k == 1 ? '‚ñ≤' : '‚ñº') : ''})">
                </button>
              </th>
              <th class="col-lg-2">ƒê·ªãa ch·ªâ</th>
              <th class="col-lg-2">S·ªë ƒëi·ªán tho·∫°i</th>
              <th class="col-lg-2">Email</th>
              <th class="col-lg-1">Chi ti·∫øt</th>
            </tr>
          </form>
        </thead>

        <tbody>
          <tr th:if="${#lists.isEmpty(bills)}">
            <td colspan="8" class="text-center text-muted fst-italic">Kh√¥ng c√≥ h√≥a ƒë∆°n n√†o.</td>
          </tr>

          <tr th:each="bill : ${bills}" class="row">
            <td th:text="${bill.id}" class="col-lg-1"></td>
            <td th:text="${bill.paymentTime}" class="col-lg-2"></td>
            <td th:text="${bill.shopName}" class="col-lg-2"></td>
            <td th:text="${bill.shopAddress}" class="col-lg-2"></td>
            <td th:text="${bill.shopPhone}" class="col-lg-2"></td>
            <td th:text="${bill.shopEmail}" class="col-lg-2"></td>
            <td class="col-lg-1 text-center">
              <a th:href="@{/manager/orders/{id}(id=${bill.id})}" class="text-decoration-none">
                <button class="btn btn-outline-secondary btn-sm">Xem</button>
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <nav th:if="${totalPages > 1}">
      <ul class="pagination justify-content-center">
        <li class="page-item" th:classappend="${page == 1} ? 'disabled'">
          <a class="page-link"
             th:href="@{/manager/bill-list(page=${page - 1}, size=${size}, sortCriteria=${sortCriteria})}">
             Tr∆∞·ªõc
          </a>
        </li>

        <li class="page-item"
            th:each="i : ${#numbers.sequence(1, totalPages)}"
            th:classappend="${i == page} ? 'active'">
          <a class="page-link"
             th:text="${i}"
             th:href="@{/manager/bill-list(page=${i}, size=${size}, sortCriteria=${sortCriteria})}">
          </a>
        </li>

        <li class="page-item" th:classappend="${page == totalPages} ? 'disabled'">
          <a class="page-link"
             th:href="@{/manager/bill-list(page=${page + 1}, size=${size}, sortCriteria=${sortCriteria})}">
             Sau
          </a>
        </li>
      </ul>
    </nav>
  </div>
</div>

<script src="/js/bootstrap/bootstrap.bundle.min.js"></script>
</body>
</html>
