<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Danh s√°ch ƒë∆°n h√†ng</title>
  <link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="auth-body">
<div class="container py-4">
  <!-- Alerts -->
  <div class="alerts-stack mb-3">
    <div class="alert alert-success alert-dismissible fade show" th:hidden="${msg == null}">
      <strong>Th√†nh c√¥ng!</strong> <span th:text="${msg}"></span>
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    <div class="alert alert-danger alert-dismissible fade show" th:hidden="${error == null}">
      <strong>Th·∫•t b·∫°i!</strong> <span th:text="${error}"></span>
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
  </div>

  <!-- ƒê∆°n h√†ng ƒëang giao -->
  <div class="auth-card p-4 shadow-sm mb-5">
    <h1 class="h5 mb-3 text-primary">üöö ƒê∆°n h√†ng ƒëang giao</h1>
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle">
        <thead class="table-light">
        <tr>
          <th>M√£ ƒë∆°n h√†ng</th>
          <th>Kh√°ch h√†ng</th>
          <th>ƒê·ªãa ch·ªâ</th>
          <th>S·ªë ƒëi·ªán tho·∫°i</th>
          <th>Th·ªùi gian ƒë·∫∑t h√†ng</th>
          <th>Th·ªùi gian giao h√†ng</th>
          <th>Tr·∫°ng th√°i</th>
          <th>H√†nh ƒë·ªông</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${#lists.isEmpty(deliveringOrders)}">
          <td colspan="8" class="text-center text-muted fst-italic">Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o ƒëang giao.</td>
        </tr>
        <tr th:each="order : ${deliveringOrders}">
          <td th:text="${order.id}"></td>
          <td th:text="${order.customer.fullName}"></td>
          <td th:text="${order.addressString}"></td>
          <td th:text="${order.phoneNumber}"></td>
          <td th:text="${order.orderTime}"></td>
          <td th:text="${order.deliveredTime}"></td>
          <td th:text="${order.orderStatus.name}"></td>
          <td>
            <form th:action="@{/shipper/orders/done/{id}(id=${order.id})}" method="post">
              <button type="submit" class="btn btn-success btn-sm">‚úî Ho√†n th√†nh</button>
            </form>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination delivering -->
    <nav th:if="${totalPagesDelivering > 1}">
      <ul class="pagination justify-content-center">
        <li class="page-item" th:classappend="${currentPageDelivering == 1} ? 'disabled'">
          <a class="page-link" th:href="@{/shipper/orders(pageDelivering=${currentPageDelivering - 1}, pageOther=${currentPageOther})}">Tr∆∞·ªõc</a>
        </li>
        <li class="page-item"
            th:each="i : ${#numbers.sequence(1, totalPagesDelivering)}"
            th:classappend="${i == currentPageDelivering} ? 'active'">
          <a class="page-link" th:text="${i}"
             th:href="@{/shipper/orders(pageDelivering=${i}, pageOther=${currentPageOther})}"></a>
        </li>
        <li class="page-item" th:classappend="${currentPageDelivering == totalPagesDelivering} ? 'disabled'">
          <a class="page-link" th:href="@{/shipper/orders(pageDelivering=${currentPageDelivering + 1}, pageOther=${currentPageOther})}">Sau</a>
        </li>
      </ul>
    </nav>
  </div>

  <!-- ƒê∆°n h√†ng kh√°c -->
  <div class="auth-card p-4 shadow-sm">
    <h1 class="h5 mb-3 text-secondary">üì¶ ƒê∆°n h√†ng kh√°c</h1>
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle">
        <thead class="table-light">
        <tr>
          <th>M√£ ƒë∆°n h√†ng</th>
          <th>Kh√°ch h√†ng</th>
          <th>ƒê·ªãa ch·ªâ</th>
          <th>S·ªë ƒëi·ªán tho·∫°i</th>
          <th>Th·ªùi gian ƒë·∫∑t h√†ng</th>
          <th>Th·ªùi gian giao h√†ng</th>
          <th>Tr·∫°ng th√°i</th>
          <th>H√†nh ƒë·ªông</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${#lists.isEmpty(otherOrders)}">
          <td colspan="8" class="text-center text-muted fst-italic">Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o kh√°c.</td>
        </tr>
        <tr th:each="order : ${otherOrders}">
          <td th:text="${order.id}"></td>
          <td th:text="${order.customer.fullName}"></td>
          <td th:text="${order.addressString}"></td>
          <td th:text="${order.phoneNumber}"></td>
          <td th:text="${order.orderTime}"></td>
          <td th:text="${order.deliveredTime}"></td>
          <td th:text="${order.orderStatus.name}"></td>
          <td>
            <form th:action="@{/shipper/orders/deliver/{id}(id=${order.id})}"
                  method="post"
                  th:if="${orderStatusService.isAwaitingShipmentStatus(order)}">
              <button type="submit" class="btn btn-primary btn-sm">üöÄ Giao h√†ng</button>
            </form>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination other -->
    <nav th:if="${totalPagesOther > 1}">
      <ul class="pagination justify-content-center">
        <li class="page-item" th:classappend="${currentPageOther == 1} ? 'disabled'">
          <a class="page-link" th:href="@{/shipper/orders(pageDelivering=${currentPageDelivering}, pageOther=${currentPageOther - 1})}">Tr∆∞·ªõc</a>
        </li>
        <li class="page-item"
            th:each="i : ${#numbers.sequence(1, totalPagesOther)}"
            th:classappend="${i == currentPageOther} ? 'active'">
          <a class="page-link" th:text="${i}"
             th:href="@{/shipper/orders(pageDelivering=${currentPageDelivering}, pageOther=${i})}"></a>
        </li>
        <li class="page-item" th:classappend="${currentPageOther == totalPagesOther} ? 'disabled'">
          <a class="page-link" th:href="@{/shipper/orders(pageDelivering=${currentPageDelivering}, pageOther=${currentPageOther + 1})}">Sau</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

<script src="/js/bootstrap/bootstrap.bundle.min.js"></script>
</body>
</html>
