<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Danh s√°ch ƒë∆°n h√†ng ƒëang giao</title>
  <link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="auth-body">
<a href="/shipper" class="btn btn-light position-absolute top-0 start-0 m-3">‚Üê Quay l·∫°i</a>
<!-- Alerts -->
<div class="alerts-stack" style="height: 0px; width: fit-content; margin: 0px 50px 0px auto;">
    <div class="alert alert-success alert-dismissible fade show" th:hidden="${msg == null}">
        <strong>Th√†nh c√¥ng!</strong> <span th:text="${msg}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    <div class="alert alert-danger alert-dismissible fade show" th:hidden="${error == null}">
        <strong>Th·∫•t b·∫°i!</strong> <span th:text="${error}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
</div>
<div class="container-fluid py-4">

  <!-- ƒê∆°n h√†ng ƒë√£ giao -->
  <br>
  <br>
  <div class="auth-card p-4 shadow-sm mb-5">
    <h1 class="h5 mb-3 text-primary">üöö ƒê∆°n h√†ng ƒë√£ giao</h1>
    
    <form th:action="@{/shipper/done-orders}" method="get">
      <div class="input-group mb-3">
        <input type="text" class="form-control" placeholder="T√¨m ki·∫øm theo email kh√°ch h√†ng..." name="searchQuery" th:value="${searchQuery}">
        <button class="btn btn-outline-primary" type="submit">T√¨m ki·∫øm</button>
      </div>
    </form>

    <h5 th:if="${doneOrders.size() > 0}" class="mb-3">T·ªïng ƒë∆°n h√†ng: <span th:text="${doneOrders.size()}">0</span></h5>

    <div class="">
      <table class="table table-striped table-hover align-middle">
        <thead class="table-light">
          <form th:action="@{/shipper/done-orders}" method="get">
            <input type="text" name="searchQuery" th:value="${searchQuery}" hidden>
            <tr class="row">
              <th class="col-lg-2">
                <button type="submit" name="sortCriteria" value="id" th:class="'btn p-0 m-0 align-baseline text-decoration-none ' + (${sortCriteria.equals('id')} ? 'btn-primary' : 'btn-outline-primary')"
                th:text="'M√£ ƒë∆°n h√†ng ' + (${sortCriteria.equals('id') ? (k == 1 ? '‚ñ≤' : '‚ñº') : ''})">
                </button>
              </th>
              <th class="col-lg-8">
                <button type="submit" name="sortCriteria" value="email" th:class="'btn p-0 m-0 align-baseline text-decoration-none ' + (${sortCriteria.equals('email')} ? 'btn-primary' : 'btn-outline-primary')"
                th:text="'Email ' + (${sortCriteria.equals('email') ? (k == 1 ? '‚ñ≤' : '‚ñº') : ''})">
                </button>
              </th>
              <th class="col-lg-2">Chi ti·∫øt</th>
            </tr>
          </form>
        </thead>
        <tbody>
        <tr th:if="${#lists.isEmpty(doneOrders)}">
          <td colspan="8" class="text-center text-muted fst-italic">Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o ƒë√£ giao.</td>
        </tr>
        <tr th:each="order : ${doneOrders}" class="row">
          <td th:text="${order.id}" class="col-lg-2"></td>
          <td th:text="${order.customer.email}" class="col-lg-8"></td>
          <td class="col-lg-2">
            <a th:href="@{/shipper/orders/{id}(id=${order.id})}"
               class="text-decoration-none">
              <button class="btn btn-outline-secondary btn-sm">Xem chi ti·∫øt</button>
            </a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination delivering -->
    <nav th:if="${totalPagesDelivering > 1}">
      <ul class="pagination justify-content-center">
        <li class="page-item" th:classappend="${currentPageDelivering == 1} ? 'disabled'">
          <a class="page-link" th:href="@{/shipper/orders(pageDelivering=${currentPageDelivering - 1}, pageOther=${currentPageOther})}">Tr∆∞·ªõc</a>
        </li>
        <li class="page-item"
            th:each="i : ${#numbers.sequence(1, totalPagesDelivering)}"
            th:classappend="${i == currentPageDelivering} ? 'active'">
          <a class="page-link" th:text="${i}"
             th:href="@{/shipper/orders(pageDelivering=${i}, pageOther=${currentPageOther})}"></a>
        </li>
        <li class="page-item" th:classappend="${currentPageDelivering == totalPagesDelivering} ? 'disabled'">
          <a class="page-link" th:href="@{/shipper/orders(pageDelivering=${currentPageDelivering + 1}, pageOther=${currentPageOther})}">Sau</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

<script src="/js/bootstrap/bootstrap.bundle.min.js"></script>
</body>
</html>
