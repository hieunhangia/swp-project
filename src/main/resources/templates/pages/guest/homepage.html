<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/css/homepage.css">
    <script src="/js/bootstrap/bootstrap.bundle.min.js"></script>
    <title>FruitShop - Trang ch·ªß</title>
</head>

<body>
<div th:replace="~{fragments/header :: header}"></div>
<div>
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <div class="container">
                <h1 class="hero-title">
                    <i class="fas fa-leaf"></i> Ch√†o m·ª´ng ƒë·∫øn v·ªõi FruitShop
                </h1>
                <p class="hero-subtitle">
                    Kh√°m ph√° nh·ªØng s·∫£n ph·∫©m t∆∞∆°i ngon, ch·∫•t l∆∞·ª£ng cao v·ªõi gi√° c·∫£ h·ª£p l√Ω
                </p>
            </div>
        </div>
    </section>

    <div class="container">
        <!-- Category Filter Section -->
        <section class="filter-section">
            <form class="d-flex align-items-center gap-3 justify-content-center flex-wrap" th:action="@{/}"
                  method="get">
                <label for="category" class="filter-title">
                    <i class="fas fa-filter"></i> L·ªçc theo danh m·ª•c:
                </label>
                <select name="categoryId" id="category" class="filter-select" onchange="this.form.submit()">
                    <option value="0" th:text="' T·∫•t c·∫£ danh m·ª•c'"
                            th:selected="${categoryId == null or categoryId == 0}">
                        T·∫•t c·∫£ danh m·ª•c
                    </option>
                    <option th:each="category : ${categories}" th:value="${category.id}"
                            th:text="'üìÅ ' + ${category.name}" th:selected="${category.id == categoryId}">
                    </option>
                </select>
            </form>
        </section>

        <!--Products Section -->
        <section class="product-section">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">üåü</span>
                    <span th:if="${categoryId == 0}" th:text="'T·∫•t c·∫£ s·∫£n ph·∫©m'"></span>
                    <span th:if="${categoryId != 0}" th:text="'Xem s·∫£n ph·∫©m theo danh m·ª•c'"></span>
                </h2>
                <a th:href="@{/product-category-sorting(sortBy='default', categoryId=${categoryId})}"
                   class="view-all-btn">
                    <i class="fas fa-arrow-right"></i> Xem t·∫•t c·∫£
                </a>
            </div>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                <div class="col" th:each="product, iterStat : ${productByCategory}">
                    <a th:href="@{/product/{id}(id=${product.id})}" class="product-card-link">
                        <div class="card product-card h-100">
                            <div class="product-image">
                                <img th:src="${product.main_image_url}" class="card-img-top" alt="Product Image">
                            </div>
                            <div class="card-body product-info">
                                <div class="product-title">
                                    <span th:text="${product.name}">Product Name</span>
                                </div>
                                <div class="product-price">
                                    <span th:text="${#numbers.formatInteger(product.price, 3, 'POINT')}"></span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </section>

        <!-- Newest Products Section -->
        <section class="product-section">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">‚ú®</span>
                    S·∫£n ph·∫©m m·ªõi nh·∫•t
                </h2>
                <a href="/product-category-sorting?sortBy=newest&categoryId=0" class="view-all-btn">
                    <i class="fas fa-arrow-right"></i> Xem t·∫•t c·∫£
                </a>
            </div>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                <div class="col" th:each="product, iterStat : ${newestProducts}">
                    <a th:href="@{/product/{id}(id=${product.id})}" class="product-card-link">
                        <div class="card product-card h-100">
                            <div class="product-image">
                                <img th:src="${product.main_image_url}" class="card-img-top" alt="Product Image">
                                <div class="product-badge"
                                     style="background: linear-gradient(45deg, #2196F3, #1976D2);">M·ªõi
                                </div>
                            </div>
                            <div class="card-body product-info">
                                <div class="product-title">
                                    <span th:text="${product.name}">Product Name</span>
                                </div>
                                <div class="product-price">
                                    <span th:text="${#numbers.formatInteger(product.price, 3, 'POINT')}"></span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </section>

        <!-- Best Selling Products Section -->
        <section class="product-section">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">üî•</span>
                    S·∫£n ph·∫©m b√°n ch·∫°y nh·∫•t
                </h2>
                <a href="/product-category-sorting?sortBy=best-seller&categoryId=0" class="view-all-btn">
                    <i class="fas fa-arrow-right"></i> Xem t·∫•t c·∫£
                </a>
            </div>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                <div class="col" th:each="product, iterStat : ${mostSoldProducts}">
                    <a th:href="@{/product/{id}(id=${product.id})}" class="product-card-link">
                        <div class="card product-card h-100">
                            <div class="product-image">
                                <img th:src="${product.main_image_url}" class="card-img-top" alt="Product Image">
                                <div class="product-badge"
                                     style="background: linear-gradient(45deg, #FF5722, #D84315);">
                                    B√°n ch·∫°y
                                </div>
                            </div>
                            <div class="card-body product-info">
                                <div class="product-title">
                                    <span th:text="${product.name}">Product Name</span>
                                </div>
                                <div class="product-price">
                                    <span th:text="${#numbers.formatInteger(product.price, 3, 'POINT')}"></span>
                                    <span class="badge bg-danger ms-2" th:if="${product.soldQuantity > 0}">
                                            <i class="fas fa-fire"></i> <span th:text="${product.soldQuantity}">0</span>
                                        ƒë√£ b√°n
                                        </span>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </section>
    </div>
</div>
<div th:replace="~{fragments/footer :: footer}"></div>
</body>

</html>